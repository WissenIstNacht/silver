name: Scala CI

on:
  push:
    branches: [  ci_testing  ]
  pull_request:
    branches: [  ci_testing  ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    
    - name: Checkout Silver
      uses: actions/checkout@v2
    
    - name: Set up JDK 1.8
      uses: actions/setup-java@v1
      with:
        java-version: 1.8
        
    - name: Assebmble project  
      run: sbt assembly
      
    - name: cache assembled JAR
      uses: actions/cache@v2
      with: 
        path: ./target
        key: ${{ runner.os }}-silver-assembly1
        
    - name: check Dependencies
      if: steps.cache.outputs.cache-hit != 'true'
      run: echo "did not hit cache (yet?)."
      
#     - name: Run Tests
#       run: sbt test

    - name: print directory
      run: pwd > print_dir.txt | ls >> print_dir.txt | cat print_dir.txt
      
    - name: Upload directory content
      uses: actions/upload-artifact@v2
      with:
        name: directory_content
        path: ./print_dir.txt
